(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"37b2":function(e,t,n){"use strict";var i=n("886e"),o=n.n(i);o.a},"62f5":function(e,t,n){"use strict";n.r(t);var i=n("edc2"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},"886e":function(e,t,n){},"9d66":function(e,t,n){"use strict";(function(e){n("a333");i(n("66fd"));var t=i(n("b42e"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},b42e:function(e,t,n){"use strict";n.r(t);var i=n("c491"),o=n("62f5");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("37b2");var c,s=n("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"18466aba",null,!1,i["a"],c);t["default"]=r.exports},c491:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={inputBox:function(){return n.e("components/inputBox/inputBox").then(n.bind(null,"90b7"))}},o=function(){var e=this,t=e.$createElement;e._self._c},a=[]},edc2:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("fb6d"),o=a(n("1e45"));function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}getApp().globalData;var u=function(){n.e("components/lw-notice/lw-notice").then(function(){return resolve(n("a78f"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/notice/notice").then(function(){return resolve(n("be59"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/grids").then(function(){return resolve(n("89b6"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/gridsk").then(function(){return resolve(n("90ce"))}.bind(null,n)).catch(n.oe)},h=function(){Promise.all([n.e("common/vendor"),n.e("components/uni-popup/uni-popup")]).then(function(){return resolve(n("334c"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/uni-popup/uni-popup-redpacket").then(function(){return resolve(n("8cc8"))}.bind(null,n)).catch(n.oe)},g={name:"index",components:{notice:l,grids:d,gridsk:p,UniPopup:h,uniPopupRedpacket:f,lwNotice:u},onShareAppMessage:function(e){return{title:"话费折扣充值中心",path:"/pages/index/index"}},data:function(){return{advanceListTwo:["携号转网和副卡、虚商不能充值"],priceList:[{name1:"50",name2:"46.5",isActive:!1},{name1:"100",name2:"93",isActive:!1},{name1:"200",name2:"186",isActive:!1}],priceListKuai:[{name1:"30",name2:"29.4",isActive:!1},{name1:"50",name2:"49",isActive:!1},{name1:"100",name2:"98",isActive:!1},{name1:"200",name2:"196",isActive:!1}],href:"https://uniapp.dcloud.io/component/README?id=uniui",swpieItems:[],tishi:"",param:"",redbagtask:"",theType:{},radio1:1,globe:{},smart:{},sun:{},tm:{},apiUrl:"https://ccc.wangwanglive.com/index.php/api/V1/",wechatpay_type:"",radio:!0,val:"hello",phoneType:"",isactive:!1,manOrkuai:!1,dianhua:null,gouno:n("e26e"),gouyes:n("11dc7"),sharefriend:n("33a1"),rechargeAmount:0,productAlias:"",disabled:!0}},watch:{dianhua:function(e,t){this.getMsgdianhua(e),console.log(e.length,"val.length "),(null==e||e.length<=3)&&(this.changeGridsFalse(),this.changeGridskfalse(),this.phoneType="")}},onLoad:function(){var t=this;e.getStorageSync("uid")||t.getCode()},mounted:function(){},onShow:function(){},methods:{orderCreateFun:function(){var t={uid:e.getStorageSync("uid"),rechargeAmount:this.rechargeAmount,rechargeAccount:this.dianhua,productType:this.manOrkuai?2:1,productAlias:this.manOrkuai?this.productAlias:"ALL"};console.log("支付接口参数",t),e.getProvider({service:"payment",success:function(n){(0,i.orderCreate)(s({},t)).then((function(t){if(0!==t.data.state){var i=t.data;e.showLoading({}),e.hideLoading(),e.requestPayment({provider:n.provider[0],appId:i.appId,timeStamp:i.timeStamp,nonceStr:i.nonceStr,package:i.package,signType:"MD5",paySign:i.paySign,success:function(t){e.showToast({title:"支付成功,话费充值中..."})},fail:function(t){e.showToast({icon:"none",title:"支付失败"})}})}else e.showToast({icon:"none",title:t.data.message})}))}})},getAliyunData:function(){var t=this;if(11==t.dianhua.length){var n=/^1(3[0-9]|4[5,7]|5[0,1,2,3,5,6,7,8,9]|6[2,5,6,7]|7[0,1,7,8,6]|8[0-9]|9[1,8,9])\d{8}$/;if(n.test(t.dianhua)&&11!=!t.dianhua.length)if(console.log("正确"),this.rechargeAmount<1)e.showToast({icon:"none",title:"请选择金额"});else{if(t.manOrkuai){if(console.log("慢"),!t.isactive)return void e.showToast({icon:"none",title:"请勾选话费慢充服务协议"})}else console.log("快");t.disabled=!1,setTimeout((function(){t.disabled=!0}),2e3),t.$commonFun.Throttle(t.querenchognzhi(),2e3)}else e.showToast({icon:"none",title:"手机号码有误"})}else e.showToast({icon:"none",title:"手机号码有误"})},querenchognzhi:function(){this.orderCreateFun()},changexieyi:function(){this.isactive=!this.isactive},getCode:function(){e.login({provider:"weixin",success:function(t){(0,i.login)({code:t.code}).then((function(t){e.setStorageSync("uid",t.data.uid)}))}})},changeGridsFalse:function(e){var t=this.priceList;t.forEach((function(e,t){e.isActive=!1})),this.priceList=t},changeGrids:function(e,t){this.changeGridskfalse(),this.manOrkuai=!0;var n=this.priceList;n.forEach((function(t,n){t.isActive=e==n})),this.priceList=n,this.rechargeAmount=t.name1,console.log("====1=============>",t)},changeGridsk:function(e,t){this.changeGridsFalse(),this.manOrkuai=!1;var n=this.priceListKuai;n.forEach((function(t,n){t.isActive=e==n})),console.log("快充工",e),this.priceListKuai=n,this.rechargeAmount=t.name1},changeGridskfalse:function(){var e=this.priceListKuai;e.forEach((function(e,t){e.isActive=!1})),this.priceListKuai=e},closeAll:function(e){1==e?this.$refs.popupcenter.close():this.$refs.额.close()},clickBtn:function(){var t=this,n=this;n.showmask=!0,setInterval((function(){n.showmask=!1}),9e3),e.getUserProfile({desc:"获取你的昵称、头像、地区及性别",success:function(n){t.$refs.popupcenter.close(),console.log("0000000",n);n.userInfo.avatarUrl,n.userInfo.nickName;e.setStorageSync("userlist",n.userInfo),e.login({provider:"weixin",success:function(e){e.code}})},fail:function(e){wx.showToast({title:"您拒绝了请求,不能正常使用小程序",icon:"error",duration:2e3})}})},onGetPhoneNumber:function(t){var n=this,i=e.getAccountInfoSync().miniProgram.appId,a="f324802795ccd5f980846b81f189f981";e.login({provider:"weixin",success:function(c){var s="https://api.weixin.qq.com/sns/jscode2session?appid="+i+"&secret="+a+"&js_code="+c.code+"&grant_type=authorization_code";e.request({url:s,success:function(e){var a=new o.default(i,e.data.session_key),c=a.decryptData(t.detail.encryptedData,t.detail.iv);n.$refs.popupPhoneNumber.close(),console.log("-----\x3e",c)},fail:function(e){console.log(e)}})}})},getMsg:function(){this.theType={id:arguments[0][1],number:arguments[0][0],value:arguments[0][2]},this.dianhua=arguments[0][0]},getMsgdianhua:function(t){var n=/^1(3[4-9]|5[012789]|8[23478]|4[7]|7[8])\d{8}$/,i=/^1(3[0-2]|5[56]|8[56]|4[5]|7[6])\d{8}$/,o=/^((133)|(149)|(153)|(173)|(191)|(18[0|1|9])|(177))[\d]{8}$/;if(t.length>=3)var a=t.substr(0,3);if(t.length>=4)var c=t.substr(0,4);if(170==a||165==a||167==a||171==a||170==c||1700==c||1702==c||1703==c||1705==c||1706==c||1707==c||1708==c||1709==c)return this.phoneType="",void e.showToast({title:"暂不支持此号码充值",icon:"none"});!0===o.test(t)?(this.phoneType="中国电信",this.productAlias="CTCC",console.log("6")):!0===i.test(t)?(console.log("7"),this.phoneType="中国联通",this.productAlias="CUCC"):!0===n.test(t)&&(console.log("8"),this.phoneType="中国移动",this.productAlias="CMCC"),11!=t.length||"中国电信"==this.phoneType||"中国联通"==this.phoneType||"中国移动"==this.phoneType||e.showToast({icon:"none",title:"手机号码有误"})},alilogin:function(){var t=this;return e.showLoading({title:"登录中..."}),e.login({provider:"alipay",success:function(n){console.log(n),t.code=n.code,e.request({url:"https://ccc.wangwanglive.com/index.php/api/Alixcx/api_alilogin?code="+t.code+"&grant_type=authorization_code",success:function(n){console.log(n.data),t.id=n.data.memberid,e.hideLoading(),e.showToast({title:"登录成功"});var i={user_id:n.data.memberid,user_nm:n.data.wx_name,user_img:n.data.img_url};e.setStorageSync("userlist",i)},fail:function(){return e.showToast({title:"获取 SesssionKey OpenId 失败",icon:"none"}),!1}})},fail:function(){return e.showToast({title:"获取 code 失败",icon:"none"}),!1}}),!1},uniListItem:function(){var t="/pages/xieyi/index";e.navigateTo({url:t})},getrecharge:function(){var t=this;e.getStorageSync("globe");e.request({url:"https://ccc.wangwanglive.com/index.php/api/V1/"+t.param,method:"GET",data:{position:3,redbagtask:1},success:function(i){t.globe=i.data.data.globe,t.smart=i.data.data.smart,t.sun=i.data.data.sun,t.tm=i.data.data.tm;var o=[{pic:n("839a"),appid:"1"},{pic:n("7de7"),appid:"1"},{pic:n("152b"),appid:"1"},{pic:n("d04c"),appid:"1"},{pic:n("349c"),appid:"1"}];t.swpieItems=o,e.setStorageSync("bander",i.data.data.bander),i.data.data.redbagtask}})}}};t.default=g}).call(this,n("543d")["default"])}},[["9d66","common/runtime","common/vendor"]]]);